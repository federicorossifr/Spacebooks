<!--<form method="POST" action="php/upload.php" enctype="multipart/form-data">
	<input type="text" name="title">
	<input type="text" name="description">
	<input type="price" name="price">

	<input type="file" name="file[]">
	<input type="file" name="file[]">
	<button type="submit"></button>
</form> -->
<h1> Text editor </h1>
<h2 id="ora"></h2>
<button onclick="execCommand('bold')">Bold</button>
<button onclick="execCommand('italic')">Italic</button>
<button onclick="execCommand('underline')">Underline</button>
<button onclick="execCommand('indent')">Indent</button>
<button onclick="execCommand('outdent')">Unindent</button>
<button onclick="askLink()">Link</button>
<button onclick="execCommand('undo')">Undo</button>
<button onclick="execCommand('redo')">Redo</button>


<form hidden id="sendContent" action="./php/manage.php" method="POST">
	<input type="text" name="content">
</form>

<p class="edited" id="editor" contenteditable="true"></p>
<br>
<button id="get">Send</button>

<br>

<div id="out">
	<table id="tab">
		<thead>
			<th>Number</th>
			<th>Times</th>
		</thead>
	</table>	
	
</div>

<style>
	.edited {
		border:1px solid black;
	}
</style>
<script type="text/javascript" src="./js/async.js"></script>
<script type="text/javascript">
	function refDate() {
		var date = new Date();
		var rand = Math.floor(Math.random() * 11);
		var prettyDate = date.toLocaleDateString() + " - " + date.getHours() + ":" + date.getMinutes() + ":";
		prettyDate+= (date.getSeconds() < 10) ? "0" + date.getSeconds(): date.getSeconds();
		prettyDate+= " -- Random# " + rand;
		ora.textContent = prettyDate;

		tab.rows[rand+1].cells[1].textContent++;
	}

	var btn = document.getElementById("get");
	var editor = document.getElementById("editor");
	var cout = "";
	var out = document.getElementById("out");
	var ora = document.getElementById("ora");
	var frm = document.getElementById("sendContent");
	var frmText = frm.getElementsByTagName("input")[0];
	var tab = document.getElementById("tab");

	function askLink() {
		var link = prompt("Href?","http://");
		document.execCommand("createLink",false,link);
	}

	window.setInterval(refDate,50);

	function parse(dm) {
		if(!dm) return;

		if(dm.tagName) {
			var startTag = "<" + dm.tagName + " ";

			for(var i = 0; i < dm.attributes.length; ++i) {
				if(dm.attributes[i].nodeName == "contenteditable") continue;
				startTag+= dm.attributes[i].nodeName + "='" + dm.attributes[i].nodeValue + "' ";
			}

			startTag+=">";
			
			var endTag = String("</" + String(dm.tagName) +">");
			cout+=startTag;
		} else {
			cout+=dm.textContent;

		}

		var chdrn = dm.childNodes;
		for(var i = 0; i < chdrn.length; ++i) {
			parse(chdrn[i]);
		}


		if(dm.tagName) {
			cout+=endTag;
		}

	}

	btn.onclick = function() {
		cout = "";
		parse(editor);
		alert(cout);
		frmText.value = cout;
		frm.submit();
	}


	var async = new AsyncReq("rrr",function() {});

	var pp = [{"id":"pp","value":"vaa"},{"id":"ppppp","value":"dddd"}];

	async.POST(pp,"ff");	

	for(var i = 0; i < 11; ++i) {
		var row = tab.insertRow(i+1);
		var cellNum = row.insertCell(0);
		var cellVal = row.insertCell(1);

		cellNum.textContent = i;
		cellVal.textContent = 0;
	}

	refDate();
</script>